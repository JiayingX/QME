---
title: 'CTT analysis for test: `r thistest$test_name`'
output:
  html_document:
    toc: yes
  pdf_document:
    toc: yes
  word_document: default
date: "Generated `r date()`"
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, results = "asis")

```


**Number of items:** `r x$test_level$descriptives$number_items`

**Number of examinees:** `r x$test_level$descriptives$number_examinees`


## Total score information

```{r totalscores}
test_info_out(x)

```


## Reliability

```{r reliability}
knitr::kable(getReliability(x), digits = 2)

knitr::kable(getDelAlpha(x), digits = 2)
```

## Item overview

```{r item_overview}
overview = getItemOverview(x)

knitr::kable(overview, digits = 2)

plotItemOverview(overview)
```


## Item details

```{r itemloop_prep}
if(!hasKey(x$test)) {
  cat("Raw test was not provided, so distractor analysis is not available.\n")
} else {
  
  terciles = getTerciles(x)
  
  for(i in 1:length(item_names(x))) {
  
    cat("### Details for `", item_names(x)[i])
    cat("`\n\n")
  
    
     cat("\n\n\n")
  
   
    print(tercile_plot(terciles[[i]]))
   
   
     cat("\n\n")
  
        choices = rownames(x$item_level$distractor_analysis[[1]][[i]])
    keys = x$test$key[match(choices, x$test$key$response), 1 + i]
    
    tbOut = data.frame(Choice = choices,
               Key = keys,
               Proportions = as.numeric(x$item_level$distractor_analysis[[1]][[i]]),
               `Response Discrimination` = as.numeric(x$item_level$distractor_analysis[[2]][[i]]),
               check.names = FALSE
              )
       print(knitr::kable(tbOut, digits = 2))
    
      cat("\n\n")
    
  }
}

```


